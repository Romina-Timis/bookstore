<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Il tuo Carrello</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>

    <nav style="display: flex; justify-content: space-between; padding: 1rem; background-color: #f0f0f0;">
        <div><a href="/books"><strong>Libreria Online</strong></a></div>
        <div><a href="/logout">Logout</a></div>
    </nav>

    <div style="margin: 1rem 0;">
        <a href="/books" style="padding: 0.5rem 1rem; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">
            ← Torna ai libri
        </a>
    </div>
    
    <main style="padding: 2rem;">
        <h2>Il tuo Carrello</h2>

        <div th:if="${carrelli.isEmpty()}">
            <p>Il tuo carrello è vuoto.</p>
        </div>

        <div th:each="item : ${carrelli}" style="border: 1px solid #ccc; padding: 1rem; margin-bottom: 1rem;">
            <p><strong>Libro:</strong> 
                <!-- Accedi direttamente al titolo usando la mappa -->
                <span th:text="${booksMap[item.bookId].title}">Titolo</span>
            </p>
            <p><strong>Quantità:</strong> <span th:text="${item.quantity}">1</span></p>
            
            <form th:action="@{'/carrello/remove/' + ${item.id}}" method="get">
                <button type="submit" style="margin-top: 0.5rem;">Rimuovi</button>
            </form>
        </div>
        
        <hr>
        <h3 style="margin-top: 1rem; color: green;">Totale: <span th:text="${totale} + ' €'"></span></h3>
        <hr>

        <h3 style="margin-top: 1rem; color: green;">
            Totale: <span th:text="${totale} + ' €'"></span>
        </h3>


    </main>

</body>

</html>